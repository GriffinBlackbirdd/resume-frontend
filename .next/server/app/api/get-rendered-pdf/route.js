"use strict";(()=>{var e={};e.id=542,e.ids=[542],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},2081:e=>{e.exports=require("child_process")},7147:e=>{e.exports=require("fs")},1017:e=>{e.exports=require("path")},3837:e=>{e.exports=require("util")},2211:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>y,patchFetch:()=>g,requestAsyncStorage:()=>m,routeModule:()=>f,serverHooks:()=>h,staticGenerationAsyncStorage:()=>x});var o={};t.r(o),t.d(o,{GET:()=>l});var n=t(7092),i=t(5932),s=t(4147),d=t(7856),a=t(7147),p=t(1017),u=t(2081);let c=(0,t(3837).promisify)(u.exec);async function l(){try{let e=(0,p.join)(process.cwd(),"temp"),r=(0,p.join)(e,"rendercv_output");if(!(0,a.existsSync)(r))return d.NextResponse.json({error:"No rendercv_output directory found"},{status:404});let t=null,o=0;try{for(let e of(0,a.readdirSync)(r))if(e.endsWith(".pdf")){let n=(0,p.join)(r,e),i=(0,a.statSync)(n);i.mtime.getTime()>o&&(o=i.mtime.getTime(),t=n)}}catch(e){console.error("Error reading rendercv_output directory:",e)}if(!t){for(let e of[(0,p.join)(r,"resume.pdf"),(0,p.join)(r,"John_Doe_CV.pdf"),(0,p.join)(r,"CV.pdf")])if((0,a.existsSync)(e)){t=e;break}}if(!t)try{let e=await c(`find "${r}" -name "*.pdf" -exec ls -t {} + | head -1`);e.stdout.trim()&&(t=e.stdout.trim())}catch(e){console.error("Find command failed:",e)}if(!(t&&(0,a.existsSync)(t)))return console.log("No PDF file found in rendercv_output directory"),d.NextResponse.json({error:"No PDF file found in rendercv_output directory",searchedDir:r,exists:(0,a.existsSync)(r)},{status:404});{console.log(`Serving PDF from: ${t}`);let e=(0,a.readFileSync)(t),r=t.split("/").pop()||"resume.pdf";return new d.NextResponse(e,{status:200,headers:{"Content-Type":"application/pdf","Content-Disposition":`inline; filename=${r}`,"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0"}})}}catch(e){return console.error("API Error:",e),d.NextResponse.json({error:"Internal server error"},{status:500})}}let f=new n.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/get-rendered-pdf/route",pathname:"/api/get-rendered-pdf",filename:"route",bundlePath:"app/api/get-rendered-pdf/route"},resolvedPagePath:"/Volumes/Crucible/resume-frontend-copy/resume-frontend/src/app/api/get-rendered-pdf/route.ts",nextConfigOutput:"standalone",userland:o}),{requestAsyncStorage:m,staticGenerationAsyncStorage:x,serverHooks:h}=f,y="/api/get-rendered-pdf/route";function g(){return(0,s.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:x})}}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),o=r.X(0,[111,965],()=>t(2211));module.exports=o})();