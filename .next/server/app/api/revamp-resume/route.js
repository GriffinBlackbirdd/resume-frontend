"use strict";(()=>{var e={};e.id=352,e.ids=[352],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},9885:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>h,patchFetch:()=>g,requestAsyncStorage:()=>c,routeModule:()=>p,serverHooks:()=>m,staticGenerationAsyncStorage:()=>d});var o={};t.r(o),t.d(o,{POST:()=>u});var s=t(7092),a=t(5932),n=t(4147),i=t(7856);let l=process.env.FASTAPI_URL||"http://localhost:8000";async function u(e){console.log("Received revamp resume request");try{let r=await e.formData();for(let e of(console.log("Form data received:",{email:r.get("email"),jobRole:r.get("jobRole"),resumeFile:r.get("resumeFile")?.constructor?.name,jobDescriptionFile:r.get("jobDescriptionFile")?.constructor?.name}),["jobRole","resumeFile","jobDescriptionFile"]))if(!r.get(e))return console.error(`Missing required field: ${e}`),i.NextResponse.json({error:`Missing required field: ${e}`},{status:400});console.log(`Forwarding request to FastAPI at: ${l}/revamp-existing`);try{let e=await fetch(`${l}/health`,{method:"GET",headers:{Accept:"application/json"}});if(!e.ok)throw Error(`FastAPI health check failed: ${e.status}`);console.log("FastAPI backend is healthy")}catch(e){return console.error("FastAPI backend health check failed:",e),i.NextResponse.json({error:"Revamp service is not available. Please make sure the FastAPI backend is running on port 8000.",details:"Run: python3 final_fastapi_server.py"},{status:503})}let t=new FormData;t.append("jobRole",r.get("jobRole")),t.append("resumeFile",r.get("resumeFile")),t.append("jobDescriptionFile",r.get("jobDescriptionFile"));let o=await fetch(`${l}/revamp-existing`,{method:"POST",body:t});if(console.log(`FastAPI response status: ${o.status}`),!o.ok){let e;let r=await o.text();console.error("FastAPI error response:",r);try{e=JSON.parse(r)}catch{e={detail:r||"Unknown FastAPI error"}}return i.NextResponse.json({error:e.detail||"FastAPI server error",status:o.status},{status:o.status})}let s=await o.json();return console.log("Revamp completed successfully"),i.NextResponse.json(s)}catch(r){console.error("API route error:",r);let e=r instanceof Error?r.message:"Unknown error";return i.NextResponse.json({error:"Failed to communicate with revamp service",details:e,troubleshooting:"Make sure FastAPI backend is running: python3 final_fastapi_server.py"},{status:500})}}let p=new s.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/revamp-resume/route",pathname:"/api/revamp-resume",filename:"route",bundlePath:"app/api/revamp-resume/route"},resolvedPagePath:"/Volumes/Crucible/resume-frontend-copy/resume-frontend/src/app/api/revamp-resume/route.ts",nextConfigOutput:"standalone",userland:o}),{requestAsyncStorage:c,staticGenerationAsyncStorage:d,serverHooks:m}=p,h="/api/revamp-resume/route";function g(){return(0,n.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:d})}}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),o=r.X(0,[111,965],()=>t(9885));module.exports=o})();