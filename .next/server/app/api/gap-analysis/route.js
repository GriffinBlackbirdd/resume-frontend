"use strict";(()=>{var e={};e.id=364,e.ids=[364],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},8712:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>g,patchFetch:()=>m,requestAsyncStorage:()=>p,routeModule:()=>u,serverHooks:()=>h,staticGenerationAsyncStorage:()=>d});var s={};r.r(s),r.d(s,{POST:()=>c});var o=r(7092),a=r(5932),n=r(4147),i=r(7856);let l=process.env.FASTAPI_URL||"http://localhost:8000";async function c(e){console.log("Received gap analysis request");try{let t=await e.formData();for(let e of(console.log("Form data received:",{email:t.get("email"),jobRole:t.get("jobRole"),resumeFile:t.get("resumeFile")?.constructor?.name,jobDescriptionFile:t.get("jobDescriptionFile")?.constructor?.name}),["email","phone","linkedin","jobRole","resumeFile","jobDescriptionFile"]))if(!t.get(e))return console.error(`Missing required field: ${e}`),i.NextResponse.json({error:`Missing required field: ${e}`},{status:400});console.log(`Forwarding request to FastAPI at: ${l}/revamp-existing`);try{let e=await fetch(`${l}/health`,{method:"GET",headers:{Accept:"application/json"}});if(!e.ok)throw Error(`FastAPI health check failed: ${e.status}`);console.log("FastAPI backend is healthy")}catch(e){return console.error("FastAPI backend health check failed:",e),i.NextResponse.json({error:"Analysis service is not available. Please make sure the FastAPI backend is running on port 8000.",details:"Run: python start_backend.py"},{status:503})}let r=await fetch(`${l}/revamp-existing`,{method:"POST",body:t});if(console.log(`FastAPI response status: ${r.status}`),!r.ok){let e;let t=await r.text();console.error("FastAPI error response:",t);try{e=JSON.parse(t)}catch{e={detail:t||"Unknown FastAPI error"}}return i.NextResponse.json({error:e.detail||"FastAPI server error",status:r.status},{status:r.status})}let s=await r.json();return console.log("Analysis completed successfully"),i.NextResponse.json(s)}catch(t){console.error("API route error:",t);let e=t instanceof Error?t.message:"Unknown error";return i.NextResponse.json({error:"Failed to communicate with analysis service",details:e,troubleshooting:"Make sure FastAPI backend is running: python start_backend.py"},{status:500})}}let u=new o.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/gap-analysis/route",pathname:"/api/gap-analysis",filename:"route",bundlePath:"app/api/gap-analysis/route"},resolvedPagePath:"/Volumes/Crucible/resume-frontend-copy/resume-frontend/src/app/api/gap-analysis/route.ts",nextConfigOutput:"standalone",userland:s}),{requestAsyncStorage:p,staticGenerationAsyncStorage:d,serverHooks:h}=u,g="/api/gap-analysis/route";function m(){return(0,n.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:d})}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[111,965],()=>r(8712));module.exports=s})();