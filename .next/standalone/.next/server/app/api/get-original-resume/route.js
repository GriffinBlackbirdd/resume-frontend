"use strict";(()=>{var e={};e.id=633,e.ids=[633],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},2081:e=>{e.exports=require("child_process")},3685:e=>{e.exports=require("http")},5687:e=>{e.exports=require("https")},5477:e=>{e.exports=require("punycode")},2781:e=>{e.exports=require("stream")},7310:e=>{e.exports=require("url")},3837:e=>{e.exports=require("util")},9796:e=>{e.exports=require("zlib")},6200:(e,r,t)=>{let s;t.r(r),t.d(r,{originalPathname:()=>f,patchFetch:()=>h,requestAsyncStorage:()=>m,routeModule:()=>c,serverHooks:()=>g,staticGenerationAsyncStorage:()=>x});var o={};t.r(o),t.d(o,{GET:()=>d});var n=t(7092),a=t(5932),i=t(4147),u=t(7856),p=t(153),l=t(2081);async function d(e){if(!s)return u.NextResponse.json({error:"Service temporarily unavailable"},{status:503});try{let{searchParams:r}=new URL(e.url),t=r.get("userId");if(!t)return u.NextResponse.json({error:"User ID is required"},{status:400});let{data:o,error:n}=await s.storage.from("user-documents").list(`${t}/`,{sortBy:{column:"created_at",order:"desc"}});if(n)return console.error("Error listing files:",n),u.NextResponse.json({error:"Failed to fetch resumes"},{status:500});let a=o?.filter(e=>e.name.startsWith("resume_")&&e.name.endsWith(".pdf"))||[];if(0===a.length)return u.NextResponse.json({error:"No resume found"},{status:404});let i=a[0],p=`${t}/${i.name}`,{data:l,error:d}=await s.storage.from("user-documents").download(p);if(d)return console.error("Error downloading file:",d),u.NextResponse.json({error:"Failed to download resume"},{status:500});return new u.NextResponse(l,{status:200,headers:{"Content-Type":"application/pdf","Cache-Control":"no-cache, no-store, must-revalidate"}})}catch(e){return console.error("API Error:",e),u.NextResponse.json({error:"Internal server error"},{status:500})}}(0,t(3837).promisify)(l.exec),process.env.NEXT_PUBLIC_SUPABASE_URL&&process.env.SUPABASE_SERVICE_ROLE_KEY&&(s=(0,p.eI)(process.env.NEXT_PUBLIC_SUPABASE_URL,process.env.SUPABASE_SERVICE_ROLE_KEY));let c=new n.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/get-original-resume/route",pathname:"/api/get-original-resume",filename:"route",bundlePath:"app/api/get-original-resume/route"},resolvedPagePath:"/Volumes/Crucible/resume-frontend-copy/resume-frontend/src/app/api/get-original-resume/route.ts",nextConfigOutput:"standalone",userland:o}),{requestAsyncStorage:m,staticGenerationAsyncStorage:x,serverHooks:g}=c,f="/api/get-original-resume/route";function h(){return(0,i.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:x})}}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[111,965,153],()=>t(6200));module.exports=s})();