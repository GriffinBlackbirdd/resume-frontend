(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{5082:function(e,t,r){Promise.resolve().then(r.t.bind(r,3054,23)),Promise.resolve().then(r.bind(r,9630)),Promise.resolve().then(r.bind(r,5064))},6463:function(e,t,r){"use strict";var o=r(1169);r.o(o,"useRouter")&&r.d(t,{useRouter:function(){return o.useRouter}}),r.o(o,"useSearchParams")&&r.d(t,{useSearchParams:function(){return o.useSearchParams}})},9630:function(e,t,r){"use strict";r.d(t,{AuthProvider:function(){return l},a:function(){return i}});var o=r(7437),n=r(2265),a=r(6463);let u=(0,n.createContext)(void 0),i=()=>{let e=(0,n.useContext)(u);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e},s="http://localhost:8000",l=e=>{let{children:t}=e,[r,i]=(0,n.useState)(null),[l,c]=(0,n.useState)(null),[h,d]=(0,n.useState)(!0),f=(0,a.useRouter)();(0,n.useEffect)(()=>{let e=localStorage.getItem("auth_token");e?(c(e),g(e)):d(!1)},[]);let g=async e=>{try{let t=await fetch("".concat(s,"/auth/verify-token"),{headers:{Authorization:"Bearer ".concat(e),"ngrok-skip-browser-warning":"true"}});if(t.ok){let e=await t.json();i(e.user)}else localStorage.removeItem("auth_token"),c(null),i(null)}catch(e){console.error("Token verification failed:",e),localStorage.removeItem("auth_token"),c(null),i(null)}finally{d(!1)}},m=async(e,t)=>{try{let r=await fetch("".concat(s,"/auth/login"),{method:"POST",headers:{"Content-Type":"application/json","ngrok-skip-browser-warning":"true"},body:JSON.stringify({email:e,password:t})});if(!r.ok){let e=await r.json();throw Error(e.detail||"Login failed")}let{access_token:o,user:n}=await r.json();c(o),i(n),localStorage.setItem("auth_token",o),f.push("/dashboard")}catch(e){throw console.error("Login error:",e),e}},k=async(e,t,r)=>{try{let o=await fetch("".concat(s,"/auth/signup"),{method:"POST",headers:{"Content-Type":"application/json","ngrok-skip-browser-warning":"true"},body:JSON.stringify({email:e,password:t,full_name:r})});if(!o.ok){let e=await o.json();throw Error(e.detail||"Signup failed")}let{access_token:n,user:a}=await o.json();c(n),i(a),localStorage.setItem("auth_token",n),f.push("/dashboard")}catch(e){throw console.error("Signup error:",e),e}};return(0,o.jsx)(u.Provider,{value:{user:r,token:l,login:m,signup:k,logout:()=>{c(null),i(null),localStorage.removeItem("auth_token"),f.push("/")},loading:h,isAuthenticated:!!r&&!!l},children:t})}},5064:function(e,t,r){"use strict";r.d(t,{F:function(){return i},ThemeProvider:function(){return u}});var o=r(7437),n=r(2265);let a=(0,n.createContext)(void 0);function u(e){let{children:t}=e,[r,u]=(0,n.useState)("light"),[i,s]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{s(!0);let e=localStorage.getItem("theme"),t=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";u(e||t)},[]),(0,n.useEffect)(()=>{i&&(localStorage.setItem("theme",r),document.documentElement.classList.toggle("dark","dark"===r))},[r,i]),(0,o.jsx)(a.Provider,{value:{theme:i?r:"light",toggleTheme:()=>{u("light"===r?"dark":"light")},setTheme:u},children:t})}function i(){let e=(0,n.useContext)(a);if(void 0===e)throw Error("useTheme must be used within a ThemeProvider");return e}},3054:function(){}},function(e){e.O(0,[141,971,23,744],function(){return e(e.s=5082)}),_N_E=e.O()}]);